<!DOCTYPE html>
<html>
  <ML prelude="true">
    let count = try Request.get_cookie_int request "count"
                with Not_found -> 0
    let cookies = Cookies.(create ~max_age:3600L ~same_site:`Strict
                        ~name:"count"  (string_of_int (count+1)) cookies);;
  </ML>
  <head>
  </head>
  <body>
    <h1>dynamic hello!</h1>
    <ul>
      <li> item 1 </li>
      <li> item 2 </li>
      <li> item 3 </li>
      <li> item 4 </li>
      <li> views: <ML>
	  let _ = echo (string_of_int count);;
	  let _ = echo (if count mod 2 = 0 then
 	                  <p>even (<ML> ^ string_of_int count ^ </ML>)</p>
	                else <p>odd</p>);;
	</ML>
      </li>
    </ul>
    <a href="."> escape from this file </a>
    <br/>
    request: <ML>
      let _ = printf "%a" Request.pp request;;
    </ML>

  </body>
</html>
